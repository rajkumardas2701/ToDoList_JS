(()=>{"use strict";const e=[],t={name:"Default",todo:e},n=JSON.parse(localStorage.getItem("projects"))?JSON.parse(localStorage.getItem("projects")):[t],o=()=>{const e=()=>{localStorage.setItem("projects",JSON.stringify(n))};return{deleteProject:t=>{n.splice(n[t.value],1),e()},addProject:(t,o=[])=>{n.push({name:t,todo:o}),e()},projects:n,deleteTodoFromProj:t=>{for(let e=0;e<n.length;e+=1)for(let o=0;o<n[e].todo.length;o+=1)n[e].todo[o].title===t&&n[e].todo.splice(o,1);e()},updateProject:(t,o)=>{for(let d=0;d<n.length;d+=1)n[d].name===t&&(n[d].todo.push(o),e())},editToDofromProj:(t,o)=>{for(let e=0;e<n.length;e+=1)for(let d=0;d<n[e].todo.length;d+=1)n[e].todo[d].title===t&&(n[e].todo[d].title=o.title,n[e].todo[d].description=o.description,n[e].todo[d].dueDate=o.dueDate,n[e].todo[d].priority=o.priority,n[e].todo[d].notes=o.notes);e()},updateProjectInLocalStorage:e}},d=()=>{const t=()=>{const e=document.getElementById("app-body"),t=document.createElement("div");t.setAttribute("id","project-section"),e.appendChild(t);const n=document.createElement("div");n.setAttribute("class","project-header"),t.appendChild(n);const o=document.createElement("h2");n.appendChild(o),o.innerHTML="Projects";const d=document.createElement("button");n.appendChild(d),d.setAttribute("id","add-project-btn"),d.innerHTML="Add Project";const l=document.createElement("div");return l.setAttribute("id","project-list"),t.appendChild(l),{displayProjects:e=>{for(let t=0;t<e.length;t+=1){const n=document.createElement("li");n.setAttribute("class","project"),n.innerHTML=`${e[t].name}`,l.appendChild(n)}}}},d=()=>{let t=[];document.getElementById("todos-list").addEventListener("click",(()=>{document.getElementById("todo-delete")&&document.getElementById("todo-delete").addEventListener("click",(d=>{const l=d.target.parentElement.parentElement.childNodes[0].textContent.split(" ")[1];(t=>{for(let n=0;n<e.length;n+=1)e[n].title===t&&e.splice(n,1)})(l),o().deleteTodoFromProj(l);const r=document.getElementById("todos-header-text").innerHTML.split(" ")[0];for(let e=0;e<n.length;e+=1)n[e].name===r&&(t=n[e].todo);i(t)}))}))},l=(e,t)=>{for(let n=0;n<e.length;n+=1){const o=document.createElement("div");o.setAttribute("class","to-do-obj");const d=document.createElement("label");d.innerHTML=`<b>Title: </b>${e[n].title}`,o.appendChild(d);const l=document.createElement("label");l.innerHTML=`<b>Description: </b>${e[n].description}`,o.appendChild(l);const r=document.createElement("label");r.innerHTML=`<b>Due Date: </b>${e[n].dueDate}`,o.appendChild(r);const i=document.createElement("label");i.innerHTML=`<b>Priority: </b>${e[n].priority}`,"High"===e[n].priority?i.style.color="red":"Medium"===e[n].priority?i.style.color="orange":i.style.color="rgb(7, 173, 118)",o.appendChild(i);const c=document.createElement("label");c.innerHTML=`<b>Note: </b>${e[n].notes}`,o.appendChild(c);const s=document.createElement("div");s.setAttribute("class","edit-delete"),o.appendChild(s);const a=document.createElement("i");a.setAttribute("class","far fa-edit"),a.setAttribute("id","todo-edit"),s.appendChild(a);const m=document.createElement("i");m.setAttribute("class","far fa-trash-alt"),m.setAttribute("id","todo-delete"),s.appendChild(m),t.appendChild(o)}d(),p()},r=e=>{const t=document.getElementById("todos-list");if(t)l(e,t);else{const t=document.getElementById("todos-section"),n=document.createElement("div");n.setAttribute("id","todos-list"),t.appendChild(n),l(e,n)}d()},i=e=>{document.getElementById("todos-list").remove(),r(e)},c=e=>{const n=document.getElementById("project-list");if(n){const t=document.createElement("li");t.setAttribute("class","project"),t.innerHTML=`${e}`,n.appendChild(t)}else t().displayProjects(e)},s=()=>{if(document.getElementById("new-project-form"))document.querySelector("#new-project-form").classList.remove("hide-new-project-form");else{const t=document.getElementById("content"),n=document.createElement("form");n.setAttribute("id","new-project-form"),t.appendChild(n);const o=document.createElement("div");o.setAttribute("class","project-attr"),n.appendChild(o);const d=document.createElement("label");d.setAttribute("class","form-label"),d.innerHTML="Project Name: ",o.appendChild(d);const l=document.createElement("input");l.setAttribute("id","form-input"),o.appendChild(l);const r=document.createElement("div");r.setAttribute("class","todo-sec"),n.appendChild(r);for(let t=0;t<e.length;t+=1){const n=document.createElement("div");n.setAttribute("class","todo-item"),r.appendChild(n);const o=document.createElement("label");o.setAttribute("class","todo-label"),o.innerHTML=`${e[t].title}`,n.appendChild(o);const d=document.createElement("input");d.setAttribute("type","checkbox"),n.appendChild(d)}const i=document.createElement("button");i.setAttribute("id","project-submit"),i.innerHTML="Submit",n.appendChild(i)}document.getElementById("project-submit")&&document.getElementById("project-submit").addEventListener("click",(t=>{t.preventDefault();const n=[];for(let o=0;o<e.length;o+=1)t.target.form[o+1].checked&&n.push(e[o]);o().addProject(document.getElementById("form-input").value,n),c(document.getElementById("form-input").value),document.getElementById("new-project-form").remove()}))},a=()=>{document.getElementById("todo-submit").addEventListener("click",(t=>{t.preventDefault();const n={title:t.target.form[0].value,description:t.target.form[1].value,dueDate:t.target.form[2].value,priority:t.target.form[3].value,notes:t.target.form[4].value};e.push(n),(e=>{const t=document.getElementById("todos-list"),n=document.createElement("div");n.setAttribute("class","to-do-obj");const o=document.createElement("label");o.innerHTML=`<b>Title: </b>${e.title}`,n.appendChild(o);const d=document.createElement("label");d.innerHTML=`<b>Description: </b>${e.description}`,n.appendChild(d);const l=document.createElement("label");l.innerHTML=`<b>Due Date: </b>${e.dueDate}`,n.appendChild(l);const r=document.createElement("label");r.innerHTML=`<b>Priority: </b>${e.priority}`,r.style.color="High"===e.priority?"red":"Medium"===e.priority?"orange":"rgb(7, 173, 118)",n.appendChild(r);const i=document.createElement("label");i.innerHTML=`<b>Note: </b>${e.notes}`,n.appendChild(i);const c=document.createElement("div");c.setAttribute("class","edit-delete"),n.appendChild(c);const s=document.createElement("i");s.setAttribute("class","far fa-edit"),s.setAttribute("id","todo-edit"),c.appendChild(s);const a=document.createElement("i");a.setAttribute("class","far fa-trash-alt"),a.setAttribute("id","todo-delete"),c.appendChild(a),t.appendChild(n)})(n);const d=document.getElementById("todos-header-text").innerHTML.split(" ")[0];"Default"!==d&&o().updateProject(d,n),document.getElementById("to-do-form-sec").remove()}))},m=e=>{e.preventDefault();const t=document.getElementById("app-body"),n=document.createElement("form");n.setAttribute("id","to-do-form-sec"),t.appendChild(n);const o=document.createElement("h4");o.setAttribute("id","todo-header"),o.innerHTML="Create a Task",n.appendChild(o);const d=document.createElement("div");d.setAttribute("class","form-elements"),n.appendChild(d);const l=document.createElement("label");l.setAttribute("class","todo-form-label"),l.innerHTML="Title",d.appendChild(l);const r=document.createElement("input");r.setAttribute("class","form-text"),d.appendChild(r);const i=document.createElement("div");i.setAttribute("class","form-elements"),n.appendChild(i);const c=document.createElement("label");c.setAttribute("class","todo-form-label"),c.innerHTML="Description",i.appendChild(c);const s=document.createElement("textarea");s.setAttribute("class","form-text"),i.appendChild(s);const m=document.createElement("div");m.setAttribute("class","form-elements"),n.appendChild(m);const p=document.createElement("label");p.setAttribute("class","todo-form-label"),p.innerHTML="Due Date",m.appendChild(p);const u=document.createElement("input");u.setAttribute("type","date"),u.setAttribute("class","form-text"),m.appendChild(u);const b=document.createElement("div");b.setAttribute("class","form-elements"),n.appendChild(b);const E=document.createElement("label");E.setAttribute("class","todo-form-label"),E.innerHTML="Priority",b.appendChild(E);const h=document.createElement("select");h.setAttribute("class","priority"),b.appendChild(h);const f=document.createElement("option");f.setAttribute("value","High"),h.appendChild(f),f.innerHTML="High";const C=document.createElement("option");C.setAttribute("value","Medium"),h.appendChild(C),C.innerHTML="Medium";const g=document.createElement("option");g.setAttribute("value","Low"),h.appendChild(g),g.innerHTML="Low";const A=document.createElement("div");A.setAttribute("class","form-elements"),n.appendChild(A);const y=document.createElement("label");y.setAttribute("class","todo-form-label"),y.innerHTML="Notes",A.appendChild(y);const v=document.createElement("textarea");v.setAttribute("class","form-text"),A.appendChild(v);const T=document.createElement("button");T.setAttribute("id","todo-submit"),T.innerHTML="Submit",n.appendChild(T),a()},p=()=>{document.getElementById("todos-list").addEventListener("click",(()=>{document.getElementById("todo-edit")&&document.getElementById("todo-edit").addEventListener("click",(e=>{u(e.target.parentNode.parentNode.firstChild.innerText.split(" ")[1])}))}))},u=t=>{let n={};for(let o=0;o<e.length;o+=1)e[o].title===t&&(n={title:`${e[o].title}`,description:`${e[o].description}`,dueDate:`${e[o].dueDate}`,priority:`${e[o].priority}`,notes:`${e[o].notes}`});b(n)},b=t=>{const n=document.getElementById("app-body"),d=document.createElement("form");d.setAttribute("id","to-do-form-sec"),n.appendChild(d);const l=document.createElement("h4");l.setAttribute("id","todo-header"),l.innerHTML="Edit Task",d.appendChild(l);const r=document.createElement("div");r.setAttribute("class","form-elements"),d.appendChild(r);const i=document.createElement("label");i.setAttribute("class","todo-form-label"),i.innerHTML="Title",r.appendChild(i);const c=document.createElement("input");c.setAttribute("class","form-text"),c.value=`${t.title}`,r.appendChild(c);const s=document.createElement("div");s.setAttribute("class","form-elements"),d.appendChild(s);const a=document.createElement("label");a.setAttribute("class","todo-form-label"),a.innerHTML="Description",s.appendChild(a);const m=document.createElement("textarea");m.setAttribute("class","form-text"),m.value=`${t.description}`,s.appendChild(m);const p=document.createElement("div");p.setAttribute("class","form-elements"),d.appendChild(p);const u=document.createElement("label");u.setAttribute("class","todo-form-label"),u.innerHTML="Due Date",p.appendChild(u);const b=document.createElement("input");b.setAttribute("type","date"),b.setAttribute("class","form-text"),b.value=`${t.dueDate}`,p.appendChild(b);const h=document.createElement("div");h.setAttribute("class","form-elements"),d.appendChild(h);const f=document.createElement("label");f.setAttribute("class","todo-form-label"),f.innerHTML="Priority",h.appendChild(f);const C=document.createElement("select");C.setAttribute("id","priority"),C.value=`${t.priority}`,h.appendChild(C);const g=document.createElement("option");g.setAttribute("value","High"),C.appendChild(g),g.innerHTML="High";const A=document.createElement("option");A.setAttribute("value","Medium"),C.appendChild(A),A.innerHTML="Medium";const y=document.createElement("option");y.setAttribute("value","Low"),C.appendChild(y),y.innerHTML="Low";for(let e=0;e<C.options.length;e+=1)C.options[e].value===t.priority&&(C.options[e].selected=!0);const v=document.createElement("div");v.setAttribute("class","form-elements"),d.appendChild(v);const T=document.createElement("label");T.setAttribute("class","todo-form-label"),T.innerHTML="Notes",v.appendChild(T);const L=document.createElement("textarea");L.setAttribute("class","form-text"),L.value=`${t.notes}`,v.appendChild(L);const H=document.createElement("button");var M;H.setAttribute("id","todo-edit-submit"),H.innerHTML="Submit",d.appendChild(H),M=t.title,document.getElementById("todo-edit-submit").addEventListener("click",(t=>{t.preventDefault();const n={title:t.target.form[0].value,description:t.target.form[1].value,dueDate:t.target.form[2].value,priority:t.target.form[3].value,notes:t.target.form[4].value};((t,n)=>{for(let o=0;o<e.length;o+=1)if(e[o].title===t){e[o].title=n.title,e[o].description=n.description,e[o].dueDate=n.dueDate,e[o].priority=n.priority,e[o].notes=n.notes;break}})(M,n),o().editToDofromProj(M,n),E(),document.getElementById("to-do-form-sec").remove()}))},E=()=>{const t=document.getElementById("todos-header-text").innerHTML.split(" ")[0];let o=[];for(let e=0;e<n.length;e+=1)n[e].name===t&&(o=n[e].todo);i("Default"!==t?o:e)};return{navbar:()=>{const e=document.getElementById("content"),t=document.createElement("div");t.setAttribute("class","navbar"),e.appendChild(t);const n=document.createElement("h1");n.setAttribute("id","nav-text"),t.appendChild(n),n.innerHTML="To-Do List App"},proj:t,addNewProjectForm:()=>{document.getElementById("add-project-btn").addEventListener("click",s)},displayProjects:c,todos:()=>{const e=document.getElementById("app-body"),t=document.createElement("div");t.setAttribute("id","todos-section"),e.appendChild(t);const n=document.createElement("div");n.setAttribute("class","todos-header"),t.appendChild(n);const o=document.createElement("h2");o.setAttribute("id","todos-header-text"),n.appendChild(o),o.innerHTML="Default To-Dos";const d=document.createElement("button");n.appendChild(d),d.setAttribute("id","add-todos-btn"),d.innerHTML="Add Task";const l=document.createElement("div");l.setAttribute("id","todos-list"),t.appendChild(l)},createAppBody:()=>{const e=document.getElementById("content"),t=document.createElement("div");t.setAttribute("id","app-body"),e.appendChild(t)},addNewToDoForm:()=>{document.getElementById("add-todos-btn").addEventListener("click",m)},todoSubmitBtn:a,displayTodos:r,getProjectTodos:()=>{document.getElementById("project-list").addEventListener("click",(e=>{let t=[];for(let o=0;o<n.length;o+=1)n[o].name===e.target.textContent&&(t=n[o].todo);document.getElementById("todos-header-text").innerHTML=`${e.target.textContent} To-Dos`,i(t)}))},deleteTodo:d,editTodos:p}};d().navbar(),d().createAppBody(),d().displayProjects(n),d().addNewProjectForm(),d().todos(),d().addNewToDoForm(),d().displayTodos(e),d().getProjectTodos(),d().deleteTodo(),d().editTodos()})();