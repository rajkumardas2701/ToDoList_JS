(()=>{"use strict";const e=JSON.parse(localStorage.getItem("todosArr"))?JSON.parse(localStorage.getItem("todosArr")):[],t=()=>{const t=()=>{localStorage.setItem("todosArr",JSON.stringify(e))};return{deleteTodoItem:n=>{for(let t=0;t<e.length;t+=1)e[t].title===n&&e.splice(t,1);t()},updateTodosInLocalStorage:t}},n={name:"Default",todo:e},o=JSON.parse(localStorage.getItem("projects"))?JSON.parse(localStorage.getItem("projects")):[n],d=()=>{const e=()=>{localStorage.setItem("projects",JSON.stringify(o))};return{deleteProj:t=>{for(let e=0;e<o.length;e+=1)o[e].name===t&&"Default"!==o[e].name&&o.splice(e,1);e()},addProject:(t,n=[])=>{o.push({name:t,todo:n}),e()},projects:o,deleteTodoFromProj:t=>{for(let e=0;e<o.length;e+=1)for(let n=0;n<o[e].todo.length;n+=1)o[e].todo[n].title===t&&o[e].todo.splice(n,1);e()},updateProject:(t,n)=>{for(let d=0;d<o.length;d+=1)o[d].name===t&&(o[d].todo.push(n),e())},editToDofromProj:(t,n)=>{for(let e=0;e<o.length;e+=1)for(let d=0;d<o[e].todo.length;d+=1)o[e].todo[d].title===t&&(o[e].todo[d].title=n.title,o[e].todo[d].description=n.description,o[e].todo[d].dueDate=n.dueDate,o[e].todo[d].priority=n.priority,o[e].todo[d].notes=n.notes);e()},updateProjectInLocalStorage:e}},l=()=>{const n=()=>{const e=document.getElementById("app-body"),t=document.createElement("div");t.setAttribute("id","project-section"),e.appendChild(t);const n=document.createElement("div");n.setAttribute("class","project-header"),t.appendChild(n);const d=document.createElement("h2");n.appendChild(d),d.innerHTML="Projects";const l=document.createElement("button");n.appendChild(l),l.setAttribute("id","add-project-btn"),l.innerHTML="Add Project";const r=document.createElement("div");return r.setAttribute("id","project-list"),t.appendChild(r),{displayProjects:e=>{for(let t=0;t<e.length;t+=1){const n=document.createElement("li");n.setAttribute("class","project-row"),r.appendChild(n);const d=document.createElement("div");if(d.setAttribute("class","project"),d.innerHTML=`${e[t].name}`,n.appendChild(d),"Default"!==o[t].name){const e=document.createElement("div");e.setAttribute("class","delete-proj-icon far fa-trash-alt"),n.appendChild(e)}}}}},l=()=>{let e=[];document.getElementById("todos-list").addEventListener("click",(()=>{document.getElementById("todo-delete")&&document.getElementById("todo-delete").addEventListener("click",(n=>{const l=n.target.parentElement.parentElement.childNodes[0].textContent.split(" ")[1];t().deleteTodoItem(l),d().deleteTodoFromProj(l);const r=document.getElementById("todos-header-text").innerHTML.split(" ")[0];for(let t=0;t<o.length;t+=1)o[t].name===r&&(e=o[t].todo);c(e)}))}))},r=(e,t)=>{for(let n=0;n<e.length;n+=1){const o=document.createElement("div");o.setAttribute("class","to-do-obj");const d=document.createElement("label");d.innerHTML=`<b>Title: </b>${e[n].title}`,o.appendChild(d);const l=document.createElement("label");l.innerHTML=`<b>Description: </b>${e[n].description}`,o.appendChild(l);const r=document.createElement("label");r.innerHTML=`<b>Due Date: </b>${e[n].dueDate}`,o.appendChild(r);const i=document.createElement("label");i.innerHTML=`<b>Priority: </b>${e[n].priority}`,"High"===e[n].priority?i.style.color="red":"Medium"===e[n].priority?i.style.color="orange":i.style.color="rgb(7, 173, 118)",o.appendChild(i);const c=document.createElement("label");c.innerHTML=`<b>Note: </b>${e[n].notes}`,o.appendChild(c);const a=document.createElement("div");a.setAttribute("class","edit-delete"),o.appendChild(a);const s=document.createElement("i");s.setAttribute("class","far fa-edit"),s.setAttribute("id","todo-edit"),a.appendChild(s);const m=document.createElement("i");m.setAttribute("class","far fa-trash-alt"),m.setAttribute("id","todo-delete"),a.appendChild(m),t.appendChild(o)}l(),u()},i=e=>{const t=document.getElementById("todos-list");if(t)r(e,t);else{const t=document.getElementById("todos-section"),n=document.createElement("div");n.setAttribute("id","todos-list"),t.appendChild(n),r(e,n)}l()},c=(e=[])=>{document.getElementById("todos-list").remove(),i(e),l(),u()},a=e=>{const t=document.getElementById("project-list");if(t){const n=document.createElement("li");n.setAttribute("class","project-row"),t.appendChild(n);const d=document.createElement("div");if(d.setAttribute("class","project"),d.innerHTML=`${e}`,n.appendChild(d),"Default"!==o){const e=document.createElement("div");e.setAttribute("class","delete-proj-icon far fa-trash-alt"),n.appendChild(e)}}else n().displayProjects(e)},s=()=>{if(document.getElementById("new-project-form"))document.querySelector("#new-project-form").classList.remove("hide-new-project-form");else{const t=document.getElementById("content"),n=document.createElement("form");n.setAttribute("id","new-project-form"),t.appendChild(n);const o=document.createElement("div");o.setAttribute("class","project-attr"),n.appendChild(o);const d=document.createElement("label");d.setAttribute("class","form-label"),d.innerHTML="Project Name: ",o.appendChild(d);const l=document.createElement("input");l.setAttribute("id","form-input"),o.appendChild(l);const r=document.createElement("div");r.setAttribute("class","todo-sec"),n.appendChild(r);for(let t=0;t<e.length;t+=1){const n=document.createElement("div");n.setAttribute("class","todo-item"),r.appendChild(n);const o=document.createElement("label");o.setAttribute("class","todo-label"),o.innerHTML=`${e[t].title}`,n.appendChild(o);const d=document.createElement("input");d.setAttribute("type","checkbox"),n.appendChild(d)}const i=document.createElement("button");i.setAttribute("id","project-submit"),i.innerHTML="Submit",n.appendChild(i)}document.getElementById("project-submit")&&document.getElementById("project-submit").addEventListener("click",(t=>{t.preventDefault();const n=[];for(let o=0;o<e.length;o+=1)t.target.form[o+1].checked&&n.push(e[o]);d().addProject(document.getElementById("form-input").value,n),a(document.getElementById("form-input").value),document.getElementById("new-project-form").remove()}))},m=()=>{document.getElementById("todo-submit").addEventListener("click",(n=>{n.preventDefault();const o={title:n.target.form[0].value,description:n.target.form[1].value,dueDate:n.target.form[2].value,priority:n.target.form[3].value,notes:n.target.form[4].value};e.push(o),t().updateTodosInLocalStorage(),(e=>{const t=document.getElementById("todos-list"),n=document.createElement("div");n.setAttribute("class","to-do-obj");const o=document.createElement("label");o.innerHTML=`<b>Title: </b>${e.title}`,n.appendChild(o);const d=document.createElement("label");d.innerHTML=`<b>Description: </b>${e.description}`,n.appendChild(d);const l=document.createElement("label");l.innerHTML=`<b>Due Date: </b>${e.dueDate}`,n.appendChild(l);const r=document.createElement("label");r.innerHTML=`<b>Priority: </b>${e.priority}`,r.style.color="High"===e.priority?"red":"Medium"===e.priority?"orange":"rgb(7, 173, 118)",n.appendChild(r);const i=document.createElement("label");i.innerHTML=`<b>Note: </b>${e.notes}`,n.appendChild(i);const c=document.createElement("div");c.setAttribute("class","edit-delete"),n.appendChild(c);const a=document.createElement("i");a.setAttribute("class","far fa-edit"),a.setAttribute("id","todo-edit"),c.appendChild(a);const s=document.createElement("i");s.setAttribute("class","far fa-trash-alt"),s.setAttribute("id","todo-delete"),c.appendChild(s),t.appendChild(n)})(o);const l=document.getElementById("todos-header-text").innerHTML.split(" ")[0];"Default"!==l&&d().updateProject(l,o),document.getElementById("to-do-form-sec").remove()}))},p=e=>{e.preventDefault();const t=document.getElementById("app-body"),n=document.createElement("form");n.setAttribute("id","to-do-form-sec"),t.appendChild(n);const o=document.createElement("h4");o.setAttribute("id","todo-header"),o.innerHTML="Create a Task",n.appendChild(o);const d=document.createElement("div");d.setAttribute("class","form-elements"),n.appendChild(d);const l=document.createElement("label");l.setAttribute("class","todo-form-label"),l.innerHTML="Title",d.appendChild(l);const r=document.createElement("input");r.setAttribute("class","form-text"),d.appendChild(r);const i=document.createElement("div");i.setAttribute("class","form-elements"),n.appendChild(i);const c=document.createElement("label");c.setAttribute("class","todo-form-label"),c.innerHTML="Description",i.appendChild(c);const a=document.createElement("textarea");a.setAttribute("class","form-text"),i.appendChild(a);const s=document.createElement("div");s.setAttribute("class","form-elements"),n.appendChild(s);const p=document.createElement("label");p.setAttribute("class","todo-form-label"),p.innerHTML="Due Date",s.appendChild(p);const u=document.createElement("input");u.setAttribute("type","date"),u.setAttribute("class","form-text"),s.appendChild(u);const b=document.createElement("div");b.setAttribute("class","form-elements"),n.appendChild(b);const h=document.createElement("label");h.setAttribute("class","todo-form-label"),h.innerHTML="Priority",b.appendChild(h);const E=document.createElement("select");E.setAttribute("class","priority"),b.appendChild(E);const f=document.createElement("option");f.setAttribute("value","High"),E.appendChild(f),f.innerHTML="High";const g=document.createElement("option");g.setAttribute("value","Medium"),E.appendChild(g),g.innerHTML="Medium";const C=document.createElement("option");C.setAttribute("value","Low"),E.appendChild(C),C.innerHTML="Low";const A=document.createElement("div");A.setAttribute("class","form-elements"),n.appendChild(A);const y=document.createElement("label");y.setAttribute("class","todo-form-label"),y.innerHTML="Notes",A.appendChild(y);const v=document.createElement("textarea");v.setAttribute("class","form-text"),A.appendChild(v);const T=document.createElement("button");T.setAttribute("id","todo-submit"),T.innerHTML="Submit",n.appendChild(T),m()},u=()=>{document.getElementById("todos-list").addEventListener("click",(()=>{document.getElementById("todo-edit")&&document.getElementById("todo-edit").addEventListener("click",(e=>{b(e.target.parentNode.parentNode.firstChild.innerText.split(" ")[1])}))}))},b=t=>{let n={};for(let o=0;o<e.length;o+=1)e[o].title===t&&(n={title:`${e[o].title}`,description:`${e[o].description}`,dueDate:`${e[o].dueDate}`,priority:`${e[o].priority}`,notes:`${e[o].notes}`});h(n)},h=n=>{const o=document.getElementById("app-body"),l=document.createElement("form");l.setAttribute("id","to-do-form-sec"),o.appendChild(l);const r=document.createElement("h4");r.setAttribute("id","todo-header"),r.innerHTML="Edit Task",l.appendChild(r);const i=document.createElement("div");i.setAttribute("class","form-elements"),l.appendChild(i);const c=document.createElement("label");c.setAttribute("class","todo-form-label"),c.innerHTML="Title",i.appendChild(c);const a=document.createElement("input");a.setAttribute("class","form-text"),a.value=`${n.title}`,i.appendChild(a);const s=document.createElement("div");s.setAttribute("class","form-elements"),l.appendChild(s);const m=document.createElement("label");m.setAttribute("class","todo-form-label"),m.innerHTML="Description",s.appendChild(m);const p=document.createElement("textarea");p.setAttribute("class","form-text"),p.value=`${n.description}`,s.appendChild(p);const u=document.createElement("div");u.setAttribute("class","form-elements"),l.appendChild(u);const b=document.createElement("label");b.setAttribute("class","todo-form-label"),b.innerHTML="Due Date",u.appendChild(b);const h=document.createElement("input");h.setAttribute("type","date"),h.setAttribute("class","form-text"),h.value=`${n.dueDate}`,u.appendChild(h);const f=document.createElement("div");f.setAttribute("class","form-elements"),l.appendChild(f);const g=document.createElement("label");g.setAttribute("class","todo-form-label"),g.innerHTML="Priority",f.appendChild(g);const C=document.createElement("select");C.setAttribute("id","priority"),C.value=`${n.priority}`,f.appendChild(C);const A=document.createElement("option");A.setAttribute("value","High"),C.appendChild(A),A.innerHTML="High";const y=document.createElement("option");y.setAttribute("value","Medium"),C.appendChild(y),y.innerHTML="Medium";const v=document.createElement("option");v.setAttribute("value","Low"),C.appendChild(v),v.innerHTML="Low";for(let e=0;e<C.options.length;e+=1)C.options[e].value===n.priority&&(C.options[e].selected=!0);const T=document.createElement("div");T.setAttribute("class","form-elements"),l.appendChild(T);const L=document.createElement("label");L.setAttribute("class","todo-form-label"),L.innerHTML="Notes",T.appendChild(L);const j=document.createElement("textarea");j.setAttribute("class","form-text"),j.value=`${n.notes}`,T.appendChild(j);const H=document.createElement("button");var M;H.setAttribute("id","todo-edit-submit"),H.innerHTML="Submit",l.appendChild(H),M=n.title,document.getElementById("todo-edit-submit").addEventListener("click",(n=>{n.preventDefault();const o={title:n.target.form[0].value,description:n.target.form[1].value,dueDate:n.target.form[2].value,priority:n.target.form[3].value,notes:n.target.form[4].value};((n,o)=>{for(let t=0;t<e.length;t+=1)if(e[t].title===n){e[t].title=o.title,e[t].description=o.description,e[t].dueDate=o.dueDate,e[t].priority=o.priority,e[t].notes=o.notes;break}t().updateTodosInLocalStorage()})(M,o),d().editToDofromProj(M,o),E(),document.getElementById("to-do-form-sec").remove()}))},E=()=>{const t=document.getElementById("todos-header-text").innerHTML.split(" ")[0];let n=[];for(let e=0;e<o.length;e+=1)o[e].name===t&&(n=o[e].todo);c("Default"!==t?n:e)};return{navbar:()=>{const e=document.getElementById("content"),t=document.createElement("div");t.setAttribute("class","navbar"),e.appendChild(t);const n=document.createElement("h1");n.setAttribute("id","nav-text"),t.appendChild(n),n.innerHTML="To-Do List App"},proj:n,addNewProjectForm:()=>{document.getElementById("add-project-btn").addEventListener("click",s)},displayProjects:a,todos:()=>{const e=document.getElementById("app-body"),t=document.createElement("div");t.setAttribute("id","todos-section"),e.appendChild(t);const n=document.createElement("div");n.setAttribute("class","todos-header"),t.appendChild(n);const o=document.createElement("h2");o.setAttribute("id","todos-header-text"),n.appendChild(o),o.innerHTML="Default To-Dos";const d=document.createElement("button");n.appendChild(d),d.setAttribute("id","add-todos-btn"),d.innerHTML="Add Task";const l=document.createElement("div");l.setAttribute("id","todos-list"),t.appendChild(l)},createAppBody:()=>{const e=document.getElementById("content"),t=document.createElement("div");t.setAttribute("id","app-body"),e.appendChild(t)},addNewToDoForm:()=>{document.getElementById("add-todos-btn").addEventListener("click",p)},todoSubmitBtn:m,displayTodos:i,getProjectTodos:()=>{document.getElementById("project-list").addEventListener("click",(e=>{let t=[];for(let n=0;n<o.length;n+=1)o[n].name===e.target.textContent&&(t=o[n].todo);document.getElementById("todos-header-text").innerHTML=`${e.target.textContent} To-Dos`,c(t)}))},deleteTodo:l,editTodos:u}};l().navbar(),l().createAppBody(),l().displayProjects(o),l().addNewProjectForm(),l().todos(),l().addNewToDoForm(),l().displayTodos(e),l().getProjectTodos(),l().deleteTodo(),l().editTodos()})();